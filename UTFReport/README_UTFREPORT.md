# Unity Test Framework Report - Python tool and Slack app

This is a tool written in Python for displaying the contents of XML files generated by the Unity Test Runner.  It can be used standalone or with Slack integration.

## Setup and usage instructions

### Getting results

* To use either the script or the app, a results xml file must be generated from the Unity Test Runner.

* To do this, the test runner is called from the command line with an argument to output the file.

* The batch file in this project's main directory, "test-boatattack.bat", does this.

* However, it must first be edited to point to your installation of the Unity editor.

* Additionally, it can be configured to run the tests on different platforms by changing the "testPlatform" argument.

* If the test platform is changed, the project's build settings must also be changed to be for the same platform.

Once you have a playmodetests.xml file, you are ready to use either the standalone script or Slack app.

### Parse Results script

The parseresults.py script can be run with Python 3.  It takes the previously generated XML file as required input.

This script outputs to the console a summary of how many tests were run, and their results.

It can also be used with the --detailed (or -d) option to output more information.  In this mode, it will list which tests were successful and which failed.  In the case of a failed test, it will also output the errors encountered by that test.

### Slack app

To use the Slack app, a Python virtual environment must be set up containing slack_bolt.

Additionally, the Slack app requires certain environment variables set up in its virtual environment:

* SLACK_BOT_TOKEN and SLACK_SIGNING_SECRET, which are unique to your Slack app and can be found in its settings page,

* TEST_RESULTS_PATH, which points to the XML file generated in the previous section.

ngrok can be used to set up a server to run the app from.  Make sure to change your app's settings so that your URL is set in the Event Subscriptions and Interactivity & Shortcuts sections.

For a detailed guide to setting up a slack_bolt app, see here: https://api.slack.com/start/building/bolt-python

Once the app is running and installed on your workspace, you can use it by going to the app's home tab.  Here it will display the less detailed test summary, and clicking the "Details" button will show the full breakdown.